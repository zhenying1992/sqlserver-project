webpackJsonp([1],{"/yk7":function(t,e){},"9fdl":function(t,e){},LWfm:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=s("VU/8")({name:"App"},r,!1,function(t){s("ZizG")},null,null).exports,i=s("zL8q"),n=s.n(i),l=s("/ocq"),c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{staticStyle:{"margin-bottom":"50px","font-size":"50px",width:"450px"}},[t._v("财务数据库管理系统")]),t._v(" "),s("el-form",{attrs:{model:t.form,"label-width":"100px"}},[s("el-form-item",{attrs:{prop:"username",label:"账号"}},[s("el-input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),s("el-form-item",{attrs:{prop:"password",label:"密码"}},[s("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1)],1)},staticRenderFns:[]};var d=s("VU/8")({data:function(){return{form:{username:"",password:""}}},methods:{submit:function(){var t=this;this.$axios({url:"/login",method:"post",data:{username:this.form.username,password:this.form.password}}).then(function(e){!0===e.data.status?t.$router.push("/home/dashboard"):t.$message({showClose:!0,message:"登陆失败，请重新输入账号密码",type:"error",duration:3e3})}).catch(function(e){t.$message({showClose:!0,message:"登陆失败，服务端不可用",type:"error",duration:3e3})})},reset:function(){this.form.username="",this.form.password=""}}},c,!1,function(t){s("p4OU")},"data-v-0eae361f",null).exports,p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"margin-top":"50px"}},[t._m(0),t._v(" "),s("div",{staticStyle:{"text-align":"left"}},t._l(t.disk_list,function(e){return s("div",{staticStyle:{display:"inline-block","margin-left":"100px"}},[s("div",[s("el-progress",{attrs:{type:"circle",percentage:e.percent,color:t.colors}}),t._v(" "),s("span",[t._v(t._s(e.disk))])],1)])}),0),t._v(" "),s("el-divider"),t._v(" "),t._m(1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"text-align":"left","margin-left":"30px"}},[e("h3",[this._v("磁盘空间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"text-align":"left","margin-left":"30px"}},[e("h3",[this._v("备份数据")])])}]};var u=s("VU/8")({name:"tool",data:function(){return{disk_list:[],colors:[{color:"#6f7ad3",percentage:20},{color:"#1989fa",percentage:40},{color:"#5cb87a",percentage:60},{color:"#e6a23c",percentage:80},{color:"#f56c6c",percentage:100}]}},created:function(){this.getDisk()},methods:{getDisk:function(){this.disk_list=[{disk:"C盘",size:100,percent:30},{disk:"D盘",size:100,percent:70},{disk:"E盘",size:100,percent:10}]}}},p,!1,function(t){s("ywPT")},"data-v-41916d36",null).exports,m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",[s("el-header",{staticStyle:{"background-color":"#2f2d2d",height:"60px"}},[s("div",{staticStyle:{"text-align":"left",float:"left"}},[s("span",{staticStyle:{color:"white","font-size":"40px","margin-left":"100px"}},[t._v("数据库管理中心")])]),t._v(" "),s("div",{staticStyle:{float:"right","margin-top":"10px"}},[s("el-dropdown",{on:{command:t.handleCommand}},[s("el-avatar",{attrs:{size:"large",src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}}),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"change"}},[t._v("修改密码")]),t._v(" "),s("el-dropdown-item",{attrs:{command:"logout"}},[t._v("退出")])],1)],1)],1)]),t._v(" "),s("el-container",[s("el-aside",{attrs:{width:"150px"}},[s("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{"min-height":"700px"},attrs:{"default-active":t.activeIndex,mode:"vertical","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[s("el-menu-item",{attrs:{index:"1"}},[s("i",{staticClass:"el-icon-menu"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("数据大盘")])]),t._v(" "),s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-monitor"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("任务配置")])]),t._v(" "),s("el-menu-item-group",[s("el-menu-item",{attrs:{index:"2-1"}},[t._v(" 定时任务")]),t._v(" "),s("el-menu-item",{attrs:{index:"2-2"}},[t._v(" 人工设置")])],1)],2),t._v(" "),s("el-menu-item",{attrs:{index:"3"}},[s("i",{staticClass:"el-icon-setting"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("通用工具")])]),t._v(" "),s("el-menu-item",{attrs:{index:"4"}},[s("i",{staticClass:"el-icon-document"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("日志中心")])])],1)],1),t._v(" "),s("el-container",[s("el-main",[s("router-view")],1),t._v(" "),s("el-footer")],1)],1)],1)],1)},staticRenderFns:[]};var _=s("VU/8")({data:function(){return{activeIndex:"1",mapping:{1:"/home/dashboard","2-1":"/home/crontab","2-2":"/home/manual",3:"/home/tool",4:"/home/log"}}},methods:{handleSelect:function(t,e){this.$router.push(this.mapping[t])},handleCommand:function(t){"logout"===t?this.logout():"change"===t&&this.changePassword()},logout:function(){var t=this;this.$axios({url:"/logout",method:"post"}).then(function(e){!0===e.data.status&&(t.$message({showClose:!0,message:"已退出",type:"success",duration:3e3}),t.$router.push("/"))}).catch(function(e){t.$message({showClose:!0,message:"服务端不可用",type:"error",duration:3e3})})},changePassword:function(){this.$router.push("/home/change-password")}}},m,!1,function(t){s("9fdl")},"data-v-64d3a89d",null).exports,f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"div1"},[s("el-button",{attrs:{type:"primary"},on:{click:t.newTask}},[t._v("新建定时任务")])],1),t._v(" "),s("div",{staticClass:"div1"},[s("span",[t._v("已存在任务:")]),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cron_task_list,border:""}},[s("el-table-column",{attrs:{prop:"id",label:"编号",width:"50px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"任务类型",width:"150px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"created_time",label:"创建时间",width:"160px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"schedule",sortable:"",label:"执行时间",width:"120px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"params",label:"参数"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.onDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),s("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"新建定时任务",visible:t.adding,width:"400px"},on:{"update:visible":function(e){t.adding=e}}},[s("el-form",{attrs:{model:t.form}},[s("el-form-item",{attrs:{label:"任务类型","label-width":"100px"}},[s("el-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择任务类型"},model:{value:t.form.task,callback:function(e){t.$set(t.form,"task",e)},expression:"form.task"}},t._l(t.task_list,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"执行时间","label-width":"100px"}},[s("el-time-select",{attrs:{"picker-options":t.picker_options,placeholder:"选择时间"},model:{value:t.form.schedule,callback:function(e){t.$set(t.form,"schedule",e)},expression:"form.schedule"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"源机器IP","label-width":"100px"}},[s("el-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择机器IP"},model:{value:t.form.source_ip,callback:function(e){t.$set(t.form,"source_ip",e)},expression:"form.source_ip"}},t._l(t.source_ip_list,function(t){return s("el-option",{key:t.id,attrs:{label:t.ip,value:t.ip}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"源机器文件","label-width":"100px"}},[s("el-input",{staticStyle:{width:"220px"},model:{value:t.form.source_path,callback:function(e){t.$set(t.form,"source_path",e)},expression:"form.source_path"}})],1),t._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.show_dest_ip,expression:"show_dest_ip"}],attrs:{label:"目的机器IP","label-width":"100px"}},[s("el-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择机器IP"},model:{value:t.form.dest_ip,callback:function(e){t.$set(t.form,"dest_ip",e)},expression:"form.dest_ip"}},t._l(t.dest_ip_list,function(t){return s("el-option",{key:t.id,attrs:{label:t.ip,value:t.ip}})}),1)],1),t._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.show_dest_path,expression:"show_dest_path"}],attrs:{label:"目的机器文件","label-width":"100px"}},[s("el-input",{staticStyle:{width:"220px"},model:{value:t.form.dest_path,callback:function(e){t.$set(t.form,"dest_path",e)},expression:"form.dest_path"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.adding=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var h=s("VU/8")({name:"crontab",data:function(){return{adding:!1,picker_options:{start:"00:00",step:"00:30",end:"23:00"},value:"",task_list:[],cron_task_list:[],form:{task:"",schedule:"",source_ip:"",source_path:"",dest_ip:"",dest_path:""},source_ip_list:[],dest_ip_list:[]}},computed:{show_dest_ip:function(){return"传输文件到远程"===this.form.task},show_dest_path:function(){return"传输文件到远程"===this.form.task}},created:function(){this.getTask(),this.getCronTask(),this.getIp()},methods:{getTask:function(){var t=this;this.$axios({url:"/tasks",method:"get"}).then(function(e){t.task_list=e.data.data})},getCronTask:function(){var t=this;this.$axios({url:"/get-cron-task",method:"get"}).then(function(e){t.cron_task_list=e.data.data})},getIp:function(){var t=this;this.$axios({url:"server",method:"get"}).then(function(e){t.source_ip_list=e.data.data,t.dest_ip_list=e.data.data})},onDelete:function(t){var e=this;this.$axios({url:"delete-cron-task",method:"delete",data:{id:t.id}}).then(function(t){e.$message({showClose:!0,message:"已成功删除",type:"success",duration:3e3}),e.getCronTask()})},newTask:function(){this.adding=!0},submit:function(){var t=this;this.adding=!1,this.$axios({url:"create-cron-task",method:"post",data:this.form}).then(function(e){t.$message({showClose:!0,message:"新建成功",type:"success",duration:3e3}),t.getCronTask()})}}},f,!1,function(t){s("ejYI")},"data-v-7bcda3f2",null).exports,v={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("manual page")])},staticRenderFns:[]};var b=s("VU/8")({name:"manual"},v,!1,function(t){s("/yk7")},"data-v-4d6d94d7",null).exports,w={data:function(){return{pick_date:"",pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},activities:[]}},methods:{OnDate:function(){var t=this;this.$axios({url:"/log",method:"post",data:this.pick_date}).then(function(e){t.activities=e.data.data})}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"block"},[s("span",{staticClass:"demonstration"},[t._v("请选择时间   ")]),t._v(" "),s("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptions},on:{change:t.OnDate},model:{value:t.pick_date,callback:function(e){t.pick_date=e},expression:"pick_date"}})],1),t._v(" "),s("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[s("el-timeline",t._l(t.activities,function(e){return s("el-timeline-item",{key:e.id,staticStyle:{"text-align":"left"},attrs:{timestamp:e.created_time,placement:"top"}},[s("el-card",[s("h4",[t._v(t._s(e.name))]),t._v(" "),s("span",[t._v(t._s(e.content))])])],1)}),1)],1)])},staticRenderFns:[]};var x=s("VU/8")(w,g,!1,function(t){s("Ogpk")},"data-v-5bd3da91",null).exports,k=s("//Fk"),y=s.n(k),$={name:"crontab",data:function(){return{server_test:!1,server_test_start:!1,server_test_step:0,server_test_result:"",database_test:!1,database_test_start:!1,database_test_step:0,database_test_result:"",ip_list:[],server_form:{ip:""},database_form:{ip:"",port:"",username:"",password:""},status:""}},created:function(){this.getIP()},methods:{getIP:function(){var t=this;this.$axios({url:"server",method:"get"}).then(function(e){t.ip_list=e.data.data})},onServerTest:function(){var t=this;this.status="wait",this.server_test_step=0,this.server_test_start=!0,this.wait(1e3).then(function(){t.server_test_step=1,t.wait(1e3).then(function(){t.server_test_step=2,t.wait(1e3).then(function(){t.$axios({url:"server-test",method:"post",data:t.server_form}).then(function(e){!0===e.data.status?(t.server_test_step=3,t.server_test_result=e.data.msg,t.status="success"):(t.server_test_step=3,t.server_test_result=e.data.msg,t.status="error")})})})})},onDatabaseTest:function(){var t=this;this.status="wait",this.database_test_step=0,this.database_test_start=!0,this.wait(1e3).then(function(){t.database_test_step=1,t.wait(1e3).then(function(){t.database_test_step=2,t.wait(1e3).then(function(){t.$axios({url:"database-test",method:"post",data:t.database_form}).then(function(e){t.database_test_step=3,t.database_test_result=e.data.msg,!0===e.data.status?t.status="success":t.status="error"})})})})},wait:function(t){return new y.a(function(e){return setTimeout(e,t)})}}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-button",{attrs:{type:"text"},on:{click:function(e){t.server_test=!0}}},[t._v("服务器连接测试")]),t._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(e){t.database_test=!0}}},[t._v("数据库连接测试")]),t._v(" "),s("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"服务器连接测试",visible:t.server_test,width:"500px"},on:{"update:visible":function(e){t.server_test=e}}},[s("el-form",{attrs:{model:t.server_form}},[s("el-form-item",{attrs:{label:"服务器IP"}},[s("el-select",{attrs:{placeholder:"请选择服务器IP"},model:{value:t.server_form.ip,callback:function(e){t.$set(t.server_form,"ip",e)},expression:"server_form.ip"}},t._l(t.ip_list,function(t){return s("el-option",{key:t.id,attrs:{label:t.ip,value:t.ip}})}),1)],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.server_test_start,expression:"server_test_start"}]},[s("el-steps",{attrs:{active:t.server_test_step,"align-center":""}},[s("el-step",{attrs:{title:"初始化",description:""}}),t._v(" "),s("el-step",{attrs:{title:"开始连接",description:""}}),t._v(" "),s("el-step",{attrs:{title:"测试结果",description:t.server_test_result,status:t.status}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.onServerTest}},[t._v("开 始")])],1)],1),t._v(" "),s("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"数据库连接测试",visible:t.database_test,width:"500px"},on:{"update:visible":function(e){t.database_test=e}}},[s("el-form",{attrs:{model:t.database_form}},[s("el-form-item",{attrs:{label:"机器IP","label-width":"100px"}},[s("el-select",{attrs:{placeholder:"请选择服务器IP"},model:{value:t.database_form.ip,callback:function(e){t.$set(t.database_form,"ip",e)},expression:"database_form.ip"}},t._l(t.ip_list,function(t){return s("el-option",{key:t.id,attrs:{label:t.ip,value:t.ip}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"数据库端口","label-width":"100px"}},[s("el-input",{staticStyle:{width:"80px"},attrs:{type:"number",autocomplete:"off",min:"1",max:"65535",step:"1"},model:{value:t.database_form.port,callback:function(e){t.$set(t.database_form,"port",e)},expression:"database_form.port"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"数据库账号","label-width":"100px"}},[s("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:t.database_form.username,callback:function(e){t.$set(t.database_form,"username",e)},expression:"database_form.username"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"数据库密码","label-width":"100px"}},[s("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:t.database_form.password,callback:function(e){t.$set(t.database_form,"password",e)},expression:"database_form.password"}})],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.database_test_start,expression:"database_test_start"}]},[s("el-steps",{attrs:{active:t.database_test_step,"align-center":""}},[s("el-step",{attrs:{title:"初始化",description:""}}),t._v(" "),s("el-step",{attrs:{title:"开始连接",description:""}}),t._v(" "),s("el-step",{attrs:{title:"测试结果",description:t.database_test_result,status:t.status}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.onDatabaseTest}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var S=s("VU/8")($,C,!1,function(t){s("XAok")},"data-v-283b7f6f",null).exports,T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-form",{staticStyle:{width:"300px"},attrs:{"label-width":"100px"}},[s("el-form-item",{attrs:{label:"新密码"}},[s("el-input",{attrs:{placeholder:"请输入新密码","show-password":""},model:{value:t.new_password,callback:function(e){t.new_password=e},expression:"new_password"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"新密码确认"}},[s("el-input",{attrs:{placeholder:"请输入新密码","show-password":""},model:{value:t.confirm_password,callback:function(e){t.confirm_password=e},expression:"confirm_password"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:t.change}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var I=s("VU/8")({data:function(){return{new_password:"",confirm_password:""}},methods:{change:function(){var t=this;this.new_password===this.confirm_password?this.$axios({url:"/change-password",method:"put",data:{password:this.new_password,confim_password:this.confim_password}}).then(function(e){!0===e.data.status?(t.$message({showClose:!0,message:"已修改，请重新登陆",type:"success",duration:3e3}),t.$router.push("/")):t.$message({showClose:!0,message:e.data.msg,type:"warning",duration:3e3})}):this.$message({showClose:!0,message:"两次输入的密码不一致",type:"error",duration:3e3})}}},T,!1,function(t){s("LWfm")},"data-v-aa86bfa4",null).exports;a.default.use(l.a);var P=new l.a({routes:[{path:"/",component:d},{path:"/login",component:d},{path:"/home",component:_,children:[{path:"dashboard",component:u},{path:"tool",component:S},{path:"log",component:x},{path:"manual",component:b},{path:"crontab",component:h},{path:"change-password",component:I}]}]}),E=s("mtWM"),R=s.n(E);s("tvR6");a.default.config.productionTip=!1,a.default.use(n.a),R.a.defaults.baseURL="/api",R.a.defaults.withCredentials=!0,R.a.interceptors.response.use(function(t){if(400!==t.data.status)return t;n.a.Message({showClose:!0,message:"用户未登陆，请重新登陆",type:"error",duration:3e3}),window.location.href="/"},function(t){n.a.Message({showClose:!0,message:"服务端不可用",type:"error",duration:3e3})}),a.default.prototype.$axios=R.a,new a.default({el:"#app",router:P,components:{App:o},template:"<App/>"})},Ogpk:function(t,e){},XAok:function(t,e){},ZizG:function(t,e){},ejYI:function(t,e){},p4OU:function(t,e){},tvR6:function(t,e){},ywPT:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a5fe9e480f09408e1cf2.js.map